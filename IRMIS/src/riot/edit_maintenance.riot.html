<edit_maintenance>
    <h5>{ window.gettext ("Maintenance") }</h5>

    <section>
        <div class="form-group">
            <label>{ maintenance_needs.display }</label>
            <small class="form-text text-muted">{ props.parent.getHelpText("maintenance_need") }</small>
            <ul class="maintenance-need">
                <li each="{ maintenance_need in maintenance_needs.options }" data-maintenance="{ maintenance_need.code }" onclick="{ checkMaintenanceNeed }">
                    <span class="{ maintenance_need.code === props.road.getMaintenanceNeed() ? 'active' : ''  } radio image"></span>
                    { maintenance_need.name }
                </li>
            </ul>
        </div>
        <div class="form-group">
            <label>{ traffic_data.display }</label>
            <small class="form-text text-muted">{ props.parent.getHelpText("traffic_level") }</small>
            <ul class="traffic-data">
                <li each="{ traffic in traffic_data.options }" data-traffic="{ traffic[0] }" onclick="{ checkTrafficData }">
                    <span class="{ traffic[0] === props.road.getTrafficLevel() ? 'active' : ''  } radio image"></span>
                    { traffic[1] }
                </li>
            </ul>
        </div>
    </section>

    <div class="button-wrapper d-flex justify-content-end">
        <button class="btn btn-primary" onclick="{ save }" disabled="{ props.saving }">{ window.gettext("Save and continue") }</button>
    </div>

    <script>
        export default {
            save(e) {
                this.props.parent.save();
            },
            checkMaintenanceNeed(e) {
                this.props.road.setMaintenanceNeed(e.currentTarget.dataset.maintenance);
                this.update();
            },
            checkTrafficData(e) {
                this.props.road.setTrafficLevel(e.currentTarget.dataset.traffic);
                this.update();
            },
            maintenance_needs: window.asset_schema.maintenance_need,
            traffic_data: window.asset_schema.traffic_level,
        }
    </script>
</edit_maintenance>
