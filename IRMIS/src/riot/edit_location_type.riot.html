<edit_location_type>
    <h5>{ window.gettext("Location") }</h5>

    <section>
        <div class="form-group">
            <label>{ administrative_areas.display }</label>
            <small class="form-text text-muted">{ props.parent.getHelpText("administrative_area") }</small>
            <select class="{ state.administrativeArea ? '' : 'inactive' } form-control" onchange="{ checkAdministrativeArea }">
                <option value="">{ window.gettext("Select a Municipality") }</option>
                <option each="{ area in administrative_areas.options }" value="{ area.id }" selected="{ area.id == state.administrativeArea }">{ area.name }</option>
            </select>
        </div>
    </section>

    <section>
        <div class="form-group">
            <label>{ asset_classes.display }</label>
            <small class="form-text text-muted">{ props.parent.getHelpText("asset_class") }</small>
            <select class="{ state.assetClass ? '' : 'inactive' } form-control" onchange="{ checkAssetClass }">
                <option value="">{ window.gettext("Select an Asset Class") }</option>
                <option each="{ asset_class in asset_classes.options }" value="{ asset_class[0] }" selected="{ asset_class[0] === state.assetClass }">{ asset_class[1] }</option>
            </select>
        </div>
    </section>

    <section>
        <edit_field_core asset="{ props.road }"></edit_field_core>
    </section>    

    <div class="button-wrapper d-flex justify-content-end">
        <button class="btn btn-primary" onclick="{ save }" disabled="{ props.saving }">{ window.gettext("Save and continue") }</button>
    </div>

    <script>
        // EDIT FIELD TAGS
        import Edit_Field_Core from "./edit_field_core.riot.html";

        export default {
            components: {
                Edit_Field_Core,
            },
            onBeforeMount(props, state) {
                state.administrativeArea = props.road.getAdministrativeArea();
                state.assetClass = props.road.getAssetClass();
            },
            save(e) {
                this.props.parent.save();
            },
            checkAdministrativeArea(e) {
                this.state.administrativeArea = e.currentTarget.value;
                this.props.road.setAdministrativeArea(this.state.administrativeArea);
                this.update();
            },
            checkAssetClass(e) {
                this.state.assetClass = e.currentTarget.value;
                this.props.road.setAssetClass(this.state.assetClass);
                this.update();
            },
            administrative_areas: window.asset_schema.administrative_area,
            asset_classes: window.asset_schema.asset_class,
        }
    </script>
</edit_location_type>
