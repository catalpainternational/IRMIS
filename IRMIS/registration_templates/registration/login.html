{% extends "base_registration.html" %}
{% load i18n %}

{% block registration %}
<form method="post" action=".">
    {% csrf_token %}

    {% if form.non_field_errors %}
    <span class="danger text-center">{{ form.non_field_errors }}</span>
    {% endif %}

    <div class="form-group">
        <label for="username">{% trans "Username" %}</label>
        <input id="username" class="form-control {% if form.username.value is None %}inactive{% endif %}" autofocus required placeholder="{% trans 'Username' %}" name="username" type="text" maxlength="254" value="{% if form.username.value is not None %}{{ form.username.value }}{% endif %}" onkeyup="highlight()">
    </div>
    <div class="form-group last">
        <label for="password">{% trans "Password" %}</label>
        <input id="password" class="{% if form.non_field_errors %}danger{% else %}inactive{% endif %} form-control" required placeholder="{% trans 'Password' %}" name="password" type="password" maxlength="254" onkeyup="highlight()">
    </div>

    <div class="align-items-center d-flex justify-content-between">
        <a href="{% url 'password_reset' %}">{% trans "Forgot your password?" %}</a>
        <button id="submit" class="btn btn-primary" type="submit" disabled>{% trans "Log in" %}</button>
    </div>
</form>

<div class="ownership">
    <div class="align-items-center d-flex">
        <span class="image rdtl"></span>
        <div class="d-flex flex-column">
            <span>{% trans "Democratic Republic of Timor-Leste" %}</span>
            <span>{% trans "Ministry of Public Works" %}</span>
        </div>
    </div>
    <span class="d-flex justify-content-center">{% trans "Designed & developed by Catalpa International" %}</span>
</div>

<script>
    var username = document.getElementById('username');
    var password = document.getElementById('password');
    var submit = document.getElementById('submit');

    function highlight() {
        if (username.value) username.classList.remove('inactive');
        else username.classList.add('inactive');

        if (password.value) password.classList.remove('danger', 'inactive');
        else password.classList.add('inactive');

        if (username.value && password.value) submit.disabled = false;
        else submit.disabled = true;
    }
</script>
{% endblock %}
